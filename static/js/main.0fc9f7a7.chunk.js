(this.webpackJsonppollination_rb=this.webpackJsonppollination_rb||[]).push([[0],{128:function(e,t,c){},238:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),i=c(13),r=c.n(i),o=(c(127),c(128),c(10)),l=(c(27),c(23)),a=c(19),d=c.p+"static/media/logo_pollination.8a160b60.jpg",j=c(1),u=function(e){var t=e.height,c=e.width,n=e.margin;return Object(j.jsx)("img",{className:"App-logo",style:{width:c,height:t,margin:n},src:d,alt:"logo"})},b=function(e){var t=e.height,c=e.width,n=e.margin,s=e.onClick,i=Object(a.f)();return Object(j.jsx)("img",{className:"Back-button",style:{width:c,height:t,margin:n},src:"data:image/png;base64,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",alt:"logo",onClick:function(){s(),i.goBack()}})},h=Object(a.i)((function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("header",{className:e.className?e.className:"App-header",children:[Object(j.jsx)(b,{onClick:e.onBackClick}),Object(j.jsx)(u,{}),function(){for(var t=["/","/login","/register","/electionResults"],c=0;c<t.length;c++)if(t[c]===e.location.pathname)return;return Object(j.jsx)("div",{className:"",children:Object(j.jsx)("button",{className:"btn btn-danger",onClick:function(){return sessionStorage.removeItem("jwt"),void e.history.push("/login")},children:"Logout"})})}()]})})})),O=c(21),m=c(44),g=c(24),x=c(15),p=c.n(x),f=c(26),v=c(114),N=c.n(v),_="https://pollination.live/api",y=function(){var e=sessionStorage.getItem("jwt");return N.a.create({headers:{Authorization:"Bearer ".concat(e)}})},E=function(){var e=Object(f.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y().get(_+t);case 3:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(0),console.log("getReq: "+e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(p.a.mark((function e(t,c){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y().post(_+t,c);case 3:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.log("postReq: "+e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,c){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y().delete(_+t);case 3:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(0),console.log("postReq: "+e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),I=Object(a.i)((function(e){var t=Object(g.b)(),c=t.register,s=t.handleSubmit,i=t.errors,r=Object(n.useState)(!1),l=Object(o.a)(r,2),a=l[0],d=l[1],u=Object(n.useState)({dob:"",firstName:"",lastName:"",email:"",password:""}),b=Object(o.a)(u,2),h=b[0],x=b[1],p=function(e){var t=e.target,c=t.id,n=t.value;x((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(O.a)({},c,n))}))},f=function(){e.history.push("/home")};return Object(j.jsx)("div",{className:"Auth-form",children:Object(j.jsx)("div",{className:"card col-12 col-lg-4 mt-2 hv-center",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minHeight:"70vh"},children:Object(j.jsxs)("form",{onSubmit:s((function(e){sessionStorage.removeItem("jwt"),S("/user",{dob:e.dob,email:e.email,first_name:e.firstName,last_name:e.lastName,password:e.password}).then((function(e){200<=e.status&&e.status<300?(sessionStorage.setItem("jwt",e.data.jwt_token),f()):d(!0)})).catch((function(e){console.log("registration failed: "),console.log(e),d(!0)}))})),children:[Object(j.jsx)("h2",{children:"Register"}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"date",children:"Date of Birth"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"dob",name:"dob",placeholder:"Date of Birth",value:h.dob,onChange:p,ref:c,required:!0})]}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"fname",name:"firstName",placeholder:"First Name",onChange:p,ref:c,required:!0})]}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"lname",name:"lastName",placeholder:"Last Name",onChange:p,ref:c,required:!0})]}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"inputEmail1",children:"Email Address"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email","aria-describedby":"emailHelp",placeholder:"Enter Email",value:h.email,onChange:p,ref:c({required:!0}),required:!0})]}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"inputPassword1",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password",value:h.password,onChange:p,ref:c({required:!0,minLength:8}),required:!0}),i.password&&Object(j.jsxs)("p",{children:["This field is required. Min length: ",8]})]}),Object(j.jsx)("p",{style:{display:"".concat(a?"":"none"),color:"red"},children:"There has been an error! Your email might have already been registered with us!"}),Object(j.jsx)("input",{className:"button",type:"submit",value:"Register"}),Object(j.jsxs)("div",{className:"mt-2",children:[Object(j.jsx)("span",{children:"Already have an account? "}),Object(j.jsx)("span",{style:{color:"#007bff",fontWeight:"bold",cursor:"pointer"},onClick:function(){console.log("Going to login page"),e.history.push("/login")},children:"Login here"})]})]})})})})),w=function(e,t){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{onClick:t,name:e,value:e,type:"button",children:e})})},R=Object(a.i)((function(e){sessionStorage.removeItem("jwt");var t=Object(g.b)(),c=t.register,s=t.handleSubmit,i=t.errors,r=Object(n.useState)(!1),l=Object(o.a)(r,2),a=l[0],d=l[1],u=Object(n.useState)({email:"",password:""}),b=Object(o.a)(u,2),h=b[0],x=b[1],p=function(e){var t=e.target,c=t.id,n=t.value;x((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(O.a)({},c,n))}))},f=function(){e.history.push("/home")};return Object(j.jsx)("div",{className:"Auth-form",children:Object(j.jsx)("div",{className:"card col-12 col-lg-4 mt-2 hv-center",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minHeight:"50vh"},children:Object(j.jsxs)("form",{onSubmit:s((function(e){S("/user/login",{email:e.email,password:e.password}).then((function(e){200<=e.status&&e.status<300?(sessionStorage.setItem("jwt",e.data.jwt_token),f()):(console.log("login failed! "+e),d(!0))})).catch((function(e){console.log("login failed: "),console.log(e),d(!0)}))})),children:[Object(j.jsx)("h2",{children:"Login"}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"inputEmail1",children:"Email address"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:h.email,onChange:p,ref:c({required:!0})})]}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"inputPassword1",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password",value:h.password,onChange:p,ref:c({required:!0,minLength:8})}),i.password&&Object(j.jsxs)("p",{children:["This field is required. Min length: ",8]})]}),Object(j.jsx)("p",{style:{display:"".concat(a?"":"none"),color:"red"},children:"There has been an error! Please check your credentials!"}),Object(j.jsx)("input",{className:"button",type:"submit",value:"Login"}),Object(j.jsxs)("div",{className:"mt-2",children:[Object(j.jsx)("span",{children:"Don't have an account? "}),Object(j.jsx)("span",{style:{color:"#007bff",fontWeight:"bold",cursor:"pointer"},onClick:function(){console.log("Going to registration page"),e.history.push("/register")},children:"Register here"})]}),w("View Public Election Results",(function(){console.log("[ + ] Redirecting to electionResults"),e.history.push("/electionResults")}))]})})})}));var C=function(e){var t=Object(n.useState)("none"),c=Object(o.a)(t,2),s=c[0],i=c[1],r=function(){i("none"),e.hideError(null)};return Object(n.useEffect)((function(){null!==e.errorMessage?i("block"):r()})),Object(j.jsx)("div",{className:"alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:s},children:Object(j.jsxs)("div",{className:"d-flex alertMessage",children:[Object(j.jsx)("span",{children:e.errorMessage}),Object(j.jsx)("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return r()},children:Object(j.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})})};var k=Object(a.i)((function(e){var t=function(){console.log("[ + ] Redirecting to organizations page."),e.history.push("/orgList")};return t(),Object(j.jsxs)("div",{className:"container d-flex align-items-center flex-column",children:[Object(j.jsx)(h,{className:"App-header",onBackClick:function(){}}),Object(j.jsx)("h4",{children:"Home page content"}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{name:"Create Organization",type:"button",onClick:function(){console.log("[ + ] Redirecting to create org page."),e.history.push("/createOrganization")},children:"Create Organization"}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{name:"Organizations list",type:"button",onClick:function(){t()},children:"Organizations list"}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{name:"Create Election",type:"button",onClick:function(){console.log("[ + ] Redirecting to create election page."),e.history.push("/createElection")},children:"Create Election"})]})})),q=c(18),D=(c(153),c(76)),T=c.n(D),L=c(274),F=c(275),U=c(273),V={SINGLE_CHOICE:"Single Choice",MULTI_SELECT:"Multiple selection",TRUE_FALSE:"True or False"};var B=Object(a.i)((function(e){var t=Object(a.g)().orgId,c=Object(g.b)({}),n=c.register,s=c.handleSubmit,i=c.reset,r=c.errors,o=c.watch,l=c.control,d=o("numberOfQuestions"),u=o("numberOfFields"),b=o("typeOfQuestions");function h(){var e=0;return e=u<0?0:u,b!==V.TRUE_FALSE?Object(q.a)(Array(parseInt(e||0)).keys()):(function(){for(var e=document.getElementsByClassName("field-value"),t=0;t<e.length;t++){var c=e[t].getElementsByTagName("input");c[0].value=t%2===0?"true":"false"}}(),Object(q.a)((Array("True","False")||0).keys()))}var O=function(){console.log("[ + ] Redirecting to view details of org: "+t),e.history.push("/orgList/")};return Object(j.jsx)("form",{onSubmit:s((function(e){e=function(e){var c=0;return e.election_id=0,void 0!==e.questions&&e.questions.map((function(t){t.election_id=0,t.ordered_choices=!0,t.max_selection_count=parseInt(e.max_selection_count)||1,t.min_selection_count=parseInt(e.min_selection_count)||1,t.options.map((function(e){e.option_id=c,c+=1}))})),delete e.numberOfQuestions,delete e.numberOfFields,delete e.typeOfQuestions,delete e.max_selection_count,delete e.min_selection_count,e.start_time=e.start_time.toISOString().slice(0,-5)+"+00:00",e.end_time=e.end_time.toISOString().slice(0,-5)+"+00:00",e.org_id=parseInt(t),e}(e),S("/org/elections",e).then((function(e){200<=e.status&&e.status<300&&(console.log("Election created"),setTimeout((function(){O()}),500))})).catch((function(e){console.log("create election error"),console.log(e)}))})),onReset:i,children:Object(j.jsxs)("div",{className:"card m-3",children:[Object(j.jsxs)("h5",{className:"card-header",children:["Create election for organisation ID: ",t]}),Object(j.jsx)(g.a,{name:"election_description",as:Object(j.jsx)(U.a,{id:"election_description",label:"Event Description",required:!0}),control:l,defaultValue:"",rules:{required:!0}}),Object(j.jsx)(F.a,{label:"Verification Required?",name:"verified",inputRef:n,control:Object(j.jsx)(L.a,{style:{color:"#c5ae2d",marginLeft:"1em"}})}),Object(j.jsx)(F.a,{label:"Results publicily available?",name:"public_results",inputRef:n,control:Object(j.jsx)(L.a,{style:{color:"#c5ae2d",marginLeft:"1em"}})}),Object(j.jsx)(F.a,{label:"Anonymous election?",name:"anonymous",inputRef:n,control:Object(j.jsx)(L.a,{style:{color:"#c5ae2d",marginLeft:"1em"}})}),Object(j.jsx)("div",{className:"card-body border-bottom",children:Object(j.jsxs)("div",{className:"form-row",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Start Date"}),Object(j.jsx)(g.a,{name:"start_time",control:l,render:function(e){var t=e.onChange,c=e.value;return Object(j.jsx)(T.a,{selected:c,onChange:t,timeInputLabel:"Time:",dateFormat:"MM/dd/yyyy h:mm aa",showTimeSelect:!0,required:!0})}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"End Date"}),Object(j.jsx)(g.a,{name:"end_time",control:l,render:function(e){var t=e.onChange,c=e.value;return Object(j.jsx)(T.a,{selected:c,onChange:t,timeInputLabel:"Time:",dateFormat:"MM/dd/yyyy h:mm aa",showTimeSelect:!0,required:!0})}})]})]})}),Object(j.jsxs)("div",{className:"card-body border-bottom",children:[Object(j.jsx)("div",{className:"form-row",children:Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Number of Questions"}),Object(j.jsx)("input",{defaultValue:"1",name:"numberOfQuestions",ref:n,className:"form-control",required:!0,type:"number",min:"0"}),Object(j.jsx)("label",{children:"Type of Questions"}),Object(j.jsx)("select",{name:"typeOfQuestions",ref:n,className:"form-control",required:!0,children:[V.SINGLE_CHOICE,V.MULTI_SELECT,V.TRUE_FALSE].map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)}))}),b!==V.TRUE_FALSE&&Object(j.jsx)("label",{children:"Number of Fields Per Question"}),b!==V.TRUE_FALSE&&Object(j.jsx)("input",{name:"numberOfFields",defaultValue:"3",ref:n,className:"form-control",required:!0,type:"number",min:"0"})]})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col",children:[b!==V.TRUE_FALSE&&Object(j.jsx)("label",{children:"Min Selection Per Question"}),b!==V.TRUE_FALSE&&Object(j.jsx)("input",{name:"min_selection_count",defaultValue:"1",ref:n,className:"form-control",required:!0,type:"number",min:"0"})]}),Object(j.jsxs)("div",{className:"col",children:[b!==V.TRUE_FALSE&&Object(j.jsx)("label",{children:"Max Selection Per Question"}),b!==V.TRUE_FALSE&&Object(j.jsx)("input",{name:"max_selection_count",defaultValue:"1",ref:n,className:"form-control",required:!0,type:"number",min:"0"})]})]})]}),function(){var e=0;return e=d<0?0:d,Object(q.a)(Array(parseInt(e||0)).keys())}().map((function(e){var t,c,s;return Object(j.jsx)("div",{className:"list-group list-group-flush",children:Object(j.jsxs)("div",{className:"list-group-item",children:[Object(j.jsxs)("h5",{className:"card-title",children:["Question ",e+1," "]}),Object(j.jsxs)("div",{className:"form-row",children:[Object(j.jsxs)("div",{className:"form-group col-6",children:[Object(j.jsx)("label",{children:"Description"}),Object(j.jsx)("input",{name:"questions[".concat(e,"].question_description"),ref:n,type:"text",className:"form-control"}),Object(j.jsx)("div",{className:"invalid-feedback",children:null===(t=r.questions)||void 0===t||null===(c=t[e])||void 0===c||null===(s=c.question)||void 0===s?void 0:s.message})]}),Object(j.jsxs)("div",{className:"form-col col-6",children:[Object(j.jsx)("label",{children:"Options:"}),h().map((function(t){return Object(j.jsx)("div",{className:"field-value",style:{marginBottom:15},children:Object(j.jsx)("input",{name:"questions[".concat(e,"].options[").concat(t,"].option_description"),ref:n,type:"text",className:"form-control"})})}))]})]})]})},e)})),Object(j.jsxs)("div",{className:"card-footer text-center border-top-0",children:[Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mr-1",children:"Submit"}),Object(j.jsx)("button",{className:"btn btn-secondary mr-1",type:"reset",children:"Reset"})]})]})})})),G=function(e){var t=Object(n.useState)({election_info:{anonymous:!0,election_description:"test_elec",election_id:10,end_time:"2024-01-23T04:56:07+00:00",org_id:10,public_results:!0,questions:[{election_id:10,max_selection_count:2,min_selection_count:2,options:[{option_description:"",option_id:20,result:0,total_votes_for:0}],ordered_choices:!1,question_description:"No Results Yet, Stay Tuned.",question_id:10}],start_time:"2000-01-23T04:56:07+00:00",verified:!0},org_info:{name:"yo sooonnn mollit",org_id:10}}),c=Object(o.a)(t,2),s=c[0],i=c[1],r=Object(a.g)().election_id;return Object(n.useEffect)((function(){E("/org/elections/results?election_id=".concat(r)).then((function(e){200===e.status&&(console.log("Got Election"),i(e.data))})).catch((function(e){console.log("Failed to get electionResults."),console.log(e)}))}),[r]),s.election_info.questions.map((function(e,t){var c=0,n=-1;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:e.question_description}),Object(j.jsx)("table",{id:"org",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Rank"}),Object(j.jsx)("th",{children:"Option"}),Object(j.jsx)("th",{children:"Result"}),Object(j.jsx)("th",{children:"Number of Votes"})]}),e.options.sort((function(e,t){return e.result<t.result?1:-1})).map((function(e,t){return n!==e.result&&c++,n=e.result,Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:c}),Object(j.jsx)("td",{children:e.option_description}),Object(j.jsxs)("td",{children:[Number.parseFloat(e.result).toPrecision(4),"%"]}),Object(j.jsx)("td",{children:e.total_votes_for})]},e.option_id)}))]})})]},e.question_id)}))},Q=function(e,t){return e.map((function(e,c){var n=e.election_description,s=e.election_id,i=e.end_time,r=e.start_time,o=e.org_id;return Object(j.jsxs)("tr",{onClick:function(){t(s,n)},children:[Object(j.jsx)("td",{children:s}),Object(j.jsx)("td",{children:n}),Object(j.jsx)("td",{children:r}),Object(j.jsx)("td",{children:i}),Object(j.jsx)("td",{children:o})]},c)}))},P=Object(a.i)((function(e){var t=Object(a.h)().path,c=Object(n.useState)([{anonymous:"",election_description:"",election_id:0,end_time:"",start_time:"",ord_id:0}]),s=Object(o.a)(c,2),i=s[0],r=s[1];return Object(n.useEffect)((function(){E("/org/elections/public/get/list?page=1&elections_per_page=333").then((function(e){200<=e.status&&e.status<300&&r(e.data.elections.filter((function(e){return!0===e.public_results})))})).catch((function(e){console.log(e)}))}),[]),Object(j.jsxs)(a.c,{children:[Object(j.jsx)(a.a,{exact:!0,path:t,children:Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"title",children:"Public Elections List"}),Object(j.jsx)("table",{id:"org",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"ID"},0),Object(j.jsx)("th",{children:"ELECTION DESCRIPTION"},1),Object(j.jsx)("th",{children:"START TIME"},2),Object(j.jsx)("th",{children:"END TIME"},3),Object(j.jsx)("th",{children:"ORG ID"},4)]}),Q(i,(function(t,c){console.log("[ + ] Redirecting to view details of "+c),e.history.push("/electionResults/electionDetails/".concat(t))}))]})})]})}),Object(j.jsx)(a.a,{path:"/electionResults/electionDetails/:election_id",children:Object(j.jsx)(G,{})})]})})),W=Object(a.i)((function(e){var t=Object(a.g)().election_id,c=Object(a.h)().path;console.log("Election ID: "+t);var s,i=Object(n.useState)(!1),r=Object(o.a)(i,2),l=r[0],d=r[1],u=Object(n.useState)({anonymous:!1,election_description:"",election_id:0,end_time:"",org_id:0,public_results:!1,questions:[],start_time:"",verified:!1}),b=Object(o.a)(u,2),h=b[0],O=b[1];return Object(n.useEffect)((function(){E("/org/elections?election_id=".concat(t)).then((function(e){200<=e.status&&e.status<300&&(console.log("GOT /org/elections/list !!!"),O(e.data))})).catch((function(e){console.log("Get /org/elections/list failed: "),console.log(e)}))}),[t]),Object(j.jsxs)(a.c,{children:[Object(j.jsx)(a.a,{exact:!0,path:c,children:Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"title",children:h.election_description}),Object(j.jsx)("table",{id:"infoTable",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"election_description:"}),Object(j.jsx)("td",{children:h.election_description})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Election Id:"}),Object(j.jsx)("td",{children:h.election_id})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Start Time:"}),Object(j.jsx)("td",{children:h.start_time})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"End Time:"}),Object(j.jsx)("td",{children:h.end_time})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Org Id:"}),Object(j.jsx)("td",{children:h.org_id})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Anonymous:"}),Object(j.jsx)("td",{children:h.anonymous+""})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Public Results:"}),Object(j.jsx)("td",{children:h.public_results+""})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"User needs to be verified:"}),Object(j.jsx)("td",{children:h.verified+""})]})]})}),Object(j.jsx)("table",{id:"org",children:Object(j.jsxs)("tbody",{children:[Object(j.jsx)("th",{children:"Question Id"}),Object(j.jsx)("th",{children:"Description"}),Object(j.jsx)("th",{children:"Choices"}),(s=h.questions,s.map((function(e,t){var c=e.question_id,n=e.question_description,s=e.options;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:c}),Object(j.jsx)("td",{children:n}),Object(j.jsx)("td",{className:"options",children:s.map((function(e,t){var c=e.option_description;return Object(j.jsxs)("div",{children:[t+1," : ",c,Object(j.jsx)("br",{})]})}))})]},t)})))]})}),Object(j.jsx)("div",{children:w("View Election",(function(){var c,n;c=t,n=h.election_description,console.log("[ + ] Redirecting to view details of "+n),e.history.push("/electionResults/electionDetails/".concat(c))}))}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{style:{display:"".concat(l?"":"none"),color:"red"},children:[Object(j.jsx)("h5",{children:"You are not authorized to delete this election!"}),Object(j.jsx)("br",{})]}),l?"":w("Delete Election",(function(){return A("/org/elections?election_id=".concat(h.election_id)).then((function(t){200<=t.status&&t.status<300?(console.log("DELETED election ".concat(h.election_id)),setTimeout((function(){e.history.push("/orgList")}),500)):(console.log("DELETE failed! "+t),d(!0))}))}))]})]})}),Object(j.jsx)(a.a,{path:"/electionResults/electionDetails/:election_id",children:Object(j.jsx)(G,{})})]})})),J=function(e,t){return e.map((function(e,c){var n=e.election_id,s=e.election_description,i=e.start_time,r=e.end_time;return Object(j.jsxs)("tr",{onClick:function(){console.log("Viewing: "+s),t(n)},children:[Object(j.jsx)("td",{children:n}),Object(j.jsx)("td",{children:s}),Object(j.jsx)("td",{children:i}),Object(j.jsx)("td",{children:r})]},c)}))},M=function(e){return e.map((function(e,t){var c=e.email,n=e.first_name,s=e.last_name,i=e.dob,r=e.privilege;return Object(j.jsxs)("tr",{onClick:function(){console.log("Clicked on: "+e)},children:[Object(j.jsx)("td",{children:c}),Object(j.jsx)("td",{children:n+" "+s}),Object(j.jsx)("td",{children:i}),Object(j.jsx)("td",{children:4===r?"Owner":3===r?"Admin":2===r?"Member":"Invited"})]},t)}))},z=Object(a.i)((function(e){var t=Object(a.h)().path,c=Object(a.g)().orgId;console.log("ORG ID: "+c);var s=Object(n.useState)(!1),i=Object(o.a)(s,2),r=i[0],l=i[1],d=Object(n.useState)(!1),u=Object(o.a)(d,2),b=u[0],h=u[1],O=Object(n.useState)(""),m=Object(o.a)(O,2),x=m[0],p=m[1],f=Object(n.useState)(""),v=Object(o.a)(f,2),N=v[0],_=v[1],y=Object(n.useState)([{election_id:1,election_description:"",start_time:"",end_time:""}]),A=Object(o.a)(y,2),I=A[0],R=A[1],C=Object(n.useState)([{email:"email@email.com",first_name:"first",last_name:"last",privilege:1,user_org_id:"some id",dob:"2021-01-01",uid:0}]),k=Object(o.a)(C,2),q=k[0],D=k[1],T=Object(n.useState)(0),L=Object(o.a)(T,2),F=L[0],U=L[1];Object(n.useEffect)((function(){E("/org/elections/list?org_id=".concat(c)).then((function(e){200<=e.status&&e.status<300&&(console.log("GOT /org/elections/list !!!"),R(e.data.elections))})).catch((function(e){console.log("Get /org/elections/list failed: "),console.log(e)})),E("/org/users?org_id=".concat(c,"&min_privilege_level=0")).then((function(e){200<=e.status&&e.status<300&&(console.log("GOT /org/users !!!"),D(e.data.users))})).catch((function(e){console.log("Get /org/users failed: "),console.log(e)})),E("/org/list").then((function(e){if(200<=e.status&&e.status<300){for(var t in e.data.orgs)parseInt(c)===e.data.orgs[t].org_id&&U(e.data.orgs[t].privilege);console.log("Recv /org/list and set privilege !!!")}})).catch((function(e){console.log("Get /org/list failed: "),console.log(e)}))}),[c]);var V=Object(g.b)(),G=V.register,Q=V.handleSubmit;return Object(j.jsx)("div",{children:Object(j.jsxs)(a.c,{children:[Object(j.jsxs)(a.a,{exact:!0,path:t,children:[Object(j.jsxs)("h2",{className:"title",children:["Organization ID: ",c]}),Object(j.jsx)("h4",{className:"title",children:4===F?"(You are the owner of this organisation)":3===F?"(You are an admin)":2===F?"(You are a member)":""}),Object(j.jsx)("h3",{className:"title",children:"Election List:"}),Object(j.jsx)("table",{id:"org",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"ID"},0),Object(j.jsx)("th",{children:"DESCRIPTION"},1),Object(j.jsx)("th",{children:"START"},2),Object(j.jsx)("th",{children:"END"},3)]}),J(I,(function(t){console.log("[ + ] Redirecting to create election page."),e.history.push("/orgList/orgDetails/".concat(c,"/electionDetails/").concat(t))}))]})}),w("Create Election",(function(){var t;t=c,console.log("[ + ] Redirecting to create election page."),e.history.push("/orgList/orgDetails/".concat(t,"/createElection/").concat(t))})),Object(j.jsx)("br",{}),F>2?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{className:"title",children:"User List:"}),Object(j.jsx)("table",{id:"userList",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Email"},0),Object(j.jsx)("th",{children:"Full Name"},1),Object(j.jsx)("th",{children:"DOB"},2),Object(j.jsx)("th",{children:"Privilege"},3)]}),M(q)]})}),Object(j.jsx)("button",{onClick:function(){h(!b)},style:{display:"".concat(b?"none":"")},children:"Add User"}),Object(j.jsxs)("form",{id:"addUserForm",onSubmit:Q((function(e){S("/org/users/invite",{invites:[{email:e.userEmail,user_org_id:e.userOrgId}],org_id:parseInt(c)}).then((function(e){200<=e.status&&e.status<300?(console.log("[User list updated!!!]"),p(""),_(""),h(!b),l(!1)):(console.log("[User list NOT UPDATED!!!]"),l(!0))})).catch((function(e){console.log("User list POST failed: "),console.log(e),l(!0)}))})),style:{display:"".concat(b?"":"none")},children:[Object(j.jsx)("h4",{className:"title",children:"Invite user to org:"}),Object(j.jsxs)("div",{id:"addUserInput",children:[Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{children:"User Email:"}),Object(j.jsx)("input",{type:"text",value:x,id:"userEmail",name:"userEmail",ref:G,placeholder:"actualEmail@email.com",onChange:function(e){return p(e.target.value)},className:"form-control",required:!0})]}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{children:"User Org Id:"}),Object(j.jsx)("input",{type:"text",value:N,id:"userOrgId",name:"userOrgId",ref:G,placeholder:"anything",onChange:function(e){return _(e.target.value)},className:"form-control",required:!0})]})]}),Object(j.jsx)("p",{style:{display:"".concat(r?"":"none"),color:"red"},children:"There has been an error! Please check the email address!"}),Object(j.jsx)("input",{className:"button",type:"submit",value:"Invite"})]})]}):""]}),Object(j.jsx)(a.a,{path:"/orgList/orgDetails/:orgId/createElection/:orgId",children:Object(j.jsx)(B,{})}),Object(j.jsx)(a.a,{path:"/orgList/orgDetails/:orgId/electionDetails/:election_id",children:Object(j.jsx)(W,{})})]})})})),H=function(e,t){return e.map((function(e,c){var n=e.org_id,s=e.name,i=e.user_org_id;return Object(j.jsxs)("tr",{onClick:function(){t(n,s)},children:[Object(j.jsx)("td",{children:n}),Object(j.jsx)("td",{children:s}),Object(j.jsx)("td",{children:i})]},c)}))},Y=function(e){return Object(j.jsx)("div",{children:Object(j.jsx)("table",{id:"infoTable",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:["Email: ",e.email]}),Object(j.jsxs)("td",{children:["D.O.B: ",e.dob]})]}),Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:["Last Name: ",e.last_name]}),Object(j.jsxs)("td",{children:["First Name: ",e.first_name]})]})]})})})},K=Object(a.i)((function(e){var t=Object(a.h)().path,c=Object(n.useState)([{org_id:0,name:"",user_org_id:""}]),s=Object(o.a)(c,2),i=s[0],r=s[1],l=Object(n.useState)({dob:"",email:"",first_name:"",last_name:""}),d=Object(o.a)(l,2),u=d[0],b=d[1];return Object(n.useEffect)((function(){E("/user").then((function(e){200<=e.status&&e.status<300&&(console.log("Recv /user !!!"),b(e.data))})).catch((function(e){console.log(e)})),E("/org/list").then((function(e){200<=e.status&&e.status<300&&(console.log("Recv /org/list !!!"),r(e.data.orgs))})).catch((function(e){console.log("Get /org/list failed: "),console.log(e)}))}),[]),Object(j.jsx)("div",{children:Object(j.jsxs)(a.c,{children:[Object(j.jsxs)(a.a,{exact:!0,path:t,children:[Object(j.jsx)("h2",{className:"title",children:"User's information"}),Y(u),Object(j.jsx)("h2",{className:"title",children:"Organization List"}),Object(j.jsx)("table",{id:"org",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"ID"},0),Object(j.jsx)("th",{children:"NAME"},1),Object(j.jsx)("th",{children:"USER ORG ID"},2)]}),H(i,(function(t,c){console.log("[ + ] Redirecting to view details of "+c),e.history.push("/orgList/orgDetails/".concat(t))}))]})}),w("Create Organization",(function(){console.log("[ + ] Redirecting to create org page."),e.history.push("/createOrganization")}))]}),Object(j.jsx)(a.a,{path:"/orgList/orgDetails/:orgId",children:Object(j.jsx)(z,{})})]})})})),Z=Object(a.i)((function(e){var t=Object(g.b)(),c=t.register,n=t.handleSubmit;return Object(j.jsx)("div",{className:"col-12 CreateOrg-form",children:Object(j.jsx)("div",{className:"card col-12 col-lg-12 mt-2 hv-center",children:Object(j.jsxs)("form",{onSubmit:n((function(t){S("/org",{name:t.orgName,user_org_id:t.orgUser_org_id,verifier_password:t.orgVerifier_password}).then((function(t){200<=t.status&&t.status<300&&(console.log("[ORG created!!!]"),console.log("[ + ] Redirecting to organizations page."),e.history.push("/orgList"))})).catch((function(e){console.log("Create org failed: "),console.log(e)}))})),children:[Object(j.jsx)("h2",{children:"Create Organization"}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"orgName",children:"Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"orgName",name:"orgName",ref:c,placeholder:"Org Name",required:"required"})]}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"orgUser_org_id",children:"User Organization ID"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"orgUser_org_id",name:"orgUser_org_id",placeholder:"User Organization ID",ref:c,required:"required"})]}),Object(j.jsxs)("div",{className:"form-group text-left",children:[Object(j.jsx)("label",{htmlFor:"orgVerifier_password",children:"ID Verifier Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"orgVerifier_password",name:"orgVerifier_password",placeholder:"Password",ref:c,required:"required"})]}),Object(j.jsx)("input",{className:"button",type:"submit",value:"Create"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]})})})}));var X=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),c=t[0],s=t[1];return Object(j.jsx)(l.a,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(h,{className:"App-header",onBackClick:function(){}}),Object(j.jsxs)("div",{className:"container d-flex align-items-center flex-column",children:[Object(j.jsxs)(a.c,{children:[Object(j.jsx)(a.a,{path:"/",exact:!0,children:Object(j.jsx)(R,{showError:s,onClick:function(){}})}),Object(j.jsx)(a.a,{path:"/login",children:Object(j.jsx)(R,{showError:s,onClick:function(){}})}),Object(j.jsx)(a.a,{path:"/register",children:Object(j.jsx)(I,{showError:s})}),Object(j.jsx)(a.a,{path:"/home",children:Object(j.jsx)(k,{})}),Object(j.jsx)(a.a,{path:"/createOrganization",children:Object(j.jsx)(Z,{showError:s})}),Object(j.jsx)(a.a,{path:"/orgList",children:Object(j.jsx)(K,{})}),Object(j.jsx)(a.a,{path:"/createElection",children:Object(j.jsx)(B,{})}),Object(j.jsx)(a.a,{path:"/electionResults",children:Object(j.jsx)(P,{})})]}),Object(j.jsx)(C,{errorMessage:c,hideError:s})]})]})})},$=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,277)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),i(e),r(e)}))};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(X,{})}),document.getElementById("root")),$()},27:function(e,t,c){}},[[238,1,2]]]);
//# sourceMappingURL=main.0fc9f7a7.chunk.js.map